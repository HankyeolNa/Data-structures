{"changed":true,"filter":false,"title":"assignment4_create.js","tooltip":"/Assignment4/assignment4_create.js","value":"const { Client } = require('pg');\nvar fs = require('fs');\nvar async = require(\"async\");\n\n\nvar db_credentials = new Object();\ndb_credentials.user = 'hankyeolna';\ndb_credentials.host = 'mydbinstance.ctotr4de22g0.us-east-1.rds.amazonaws.com';\ndb_credentials.database = 'hankyeolna';\ndb_credentials.password = 'dkwk3981';\ndb_credentials.port = 5432;\n\n\nconst client = new Client(db_credentials);\nclient.connect();\n\n\nvar addressesForDb = []\nvar content = fs.readFileSync('../Assignment3/assignment3.json');\nvar parsedJSON = JSON.parse(content);\n\nfor (var i = 0; i < 4; i++) {\n    var address = parsedJSON[i].InputAddress.StreetAddress\n    var real = new Object();\n    real.address = address;\n    real.latLong = { lat: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude, lng: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude }\n    addressesForDb[i] = real;\n}\n\nvar thisQuery;\n\n/*\nthisQuery = \"CREATE TABLE aalocations (address varchar(100), lat double precision, long double precision);\";\nclient.query(thisQuery, (err, res) => {\n    console.log(err, res);\n    client.end();\n});\n*/\n\n\n","undoManager":{"mark":-2,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":74,"column":0},"action":"remove","lines":["const { Client } = require('pg');","var fs = require('fs');","var async = require(\"async\");","","","var db_credentials = new Object();","db_credentials.user = 'hankyeolna';","db_credentials.host = 'mydbinstance.ctotr4de22g0.us-east-1.rds.amazonaws.com';","db_credentials.database = 'hankyeolna';","db_credentials.password = 'dkwk3981';","db_credentials.port = 5432;","","","const client = new Client(db_credentials);","client.connect();","","","var addressesForDb = []","var content = fs.readFileSync('/Assignment3/assignment3.json');","//우선 저희가 과제3때 결과물들을 확인하기위해서 콘텐트 변수에 담았어요","console.log(content)","/*","var parsedJSON = JSON.parse(content);","","for (var i = 0; i < 4; i++) {","    var address = parsedJSON[i].InputAddress.StreetAddress","    var real = new Object();","    real.address = address;","    real.latLong = { lat: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude, lng: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude }","    addressesForDb[i] = real;","}","*/","","var thisQuery;","","/*","thisQuery = \"CREATE TABLE aalocations (address varchar(100), lat double precision, long double precision);\";","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/","","","/*","async.eachSeries(addressesForDb, function(value, callback) {","    const client = new Client(db_credentials);","    client.connect();","    var thisQuery = \"INSERT INTO aalocations VALUES (E'\" + value.address + \"', \" + value.latLong.lat + \", \" + value.latLong.lng + \");\";","    client.query(thisQuery, (err, res) => {","        console.log(err, res);","        client.end();","    });","    setTimeout(callback, 1000); ","});","*/","","","/*","thisQuery = \"SELECT * FROM aalocations;\";","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/","","","/*","thisQuery = \"DROP TABLE aalocations;\"; ","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/ ",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":69,"column":3},"action":"insert","lines":["const { Client } = require('pg');","var fs = require('fs');","var async = require(\"async\");","","","var db_credentials = new Object();","db_credentials.user = 'hankyeolna';","db_credentials.host = 'mydbinstance.ctotr4de22g0.us-east-1.rds.amazonaws.com';","db_credentials.database = 'hankyeolna';","db_credentials.password = 'dkwk3981';","db_credentials.port = 5432;","","","const client = new Client(db_credentials);","client.connect();","","","var addressesForDb = []","var content = fs.readFileSync('../Assignment3/assignment3.json');","var parsedJSON = JSON.parse(content);","","for (var i = 0; i < 4; i++) {","    var address = parsedJSON[i].InputAddress.StreetAddress","    var real = new Object();","    real.address = address;","    real.latLong = { lat: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude, lng: parsedJSON[i].OutputGeocodes[0].OutputGeocode.Latitude }","    addressesForDb[i] = real;","}","","var thisQuery;","","/*","thisQuery = \"CREATE TABLE aalocations (address varchar(100), lat double precision, long double precision);\";","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/","","","/*","async.eachSeries(addressesForDb, function(value, callback) {","    const client = new Client(db_credentials);","    client.connect();","    var thisQuery = \"INSERT INTO aalocations VALUES (E'\" + value.address + \"', \" + value.latLong.lat + \", \" + value.latLong.lng + \");\";","    client.query(thisQuery, (err, res) => {","        console.log(err, res);","        client.end();","    });","    setTimeout(callback, 1000); ","});","*/","","","","thisQuery = \"SELECT * FROM aalocations;\";","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","","","","/*","thisQuery = \"DROP TABLE aalocations;\"; ","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/ "]}],[{"start":{"row":40,"column":0},"end":{"row":69,"column":3},"action":"remove","lines":["/*","async.eachSeries(addressesForDb, function(value, callback) {","    const client = new Client(db_credentials);","    client.connect();","    var thisQuery = \"INSERT INTO aalocations VALUES (E'\" + value.address + \"', \" + value.latLong.lat + \", \" + value.latLong.lng + \");\";","    client.query(thisQuery, (err, res) => {","        console.log(err, res);","        client.end();","    });","    setTimeout(callback, 1000); ","});","*/","","","","thisQuery = \"SELECT * FROM aalocations;\";","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","","","","/*","thisQuery = \"DROP TABLE aalocations;\"; ","client.query(thisQuery, (err, res) => {","    console.log(err, res);","    client.end();","});","*/ "],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":37,"column":0},"end":{"row":37,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1538735535069}