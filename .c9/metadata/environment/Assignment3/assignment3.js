{"filter":false,"title":"assignment3.js","tooltip":"/Assignment3/assignment3.js","undoManager":{"mark":20,"position":20,"stack":[[{"start":{"row":0,"column":0},"end":{"row":68,"column":3},"action":"remove","lines":["// npm install cheerio","","var fs = require('fs');","var cheerio = require('cheerio');","var request = require('request'); // npm install request","var async = require('async'); // npm install async","var fs = require('fs');","// load the thesis text file into a variable, `content`","// this is the file that we created in the starter code from last week","var content = fs.readFileSync('data/m09.txt');","","// load `content` into a cheerio object","var $ = cheerio.load(content);","/*","// print (to the console) names of thesis students","$('body > center > table > tbody > tr > td > table > tbody > tr:nth-child(2) > td > div > table > tbody>tr>td').each(function(i, elem) {","    if(i==0||i==3||i==6||i==9)","    console.log(i+\"번쨰 Address/Location : \"+$(elem).text());","});","","*/","// write the project titles to a text file","var thesisTitles = ''; // this variable will hold the lines of text","","var flag =1;","$('body > center > table > tbody > tr > td > table > tbody > tr:nth-child(2) > td > div > table > tbody>tr>td').each(function(i, elem) {","    if(i==0||i==3||i==6||i==9) {","        thesisTitles += flag +\"번째 주소 : \" + ($(elem).text()) + '\\n';","        flag++;   ","    }","        ","    ","});","var Split = thesisTitles.split(/\\r\\n|\\r|\\n/);","","var realaddress1 = Split[3].split(',')[0];","var realaddress2 = Split[21].split(',')[0];","var realaddress3 = Split[39].split(',')[0];","var realaddress4 = Split[57].split(',')[0];","","","","var apiKey = process.env.TAMU_KEY; ","console.log(\"apiKey : \" + apiKey)","var meetingsData = [];","var addresses = [realaddress1,realaddress2,realaddress3,realaddress4];","","// eachSeries in the async module iterates over an array and operates on each item in the array in series","async.eachSeries(addresses, function(value, callback) {","    var apiRequest = 'https://geoservices.tamu.edu/Services/Geocode/WebService/GeocoderWebServiceHttpNonParsed_V04_01.aspx?';","    apiRequest += 'streetAddress=' + value.split(' ').join('%20');","    apiRequest += '&city=New%20York&state=NY&apikey=' + apiKey;","    apiRequest += '&format=json&version=4.01';","    ","    request(apiRequest, function(err, resp, body) {","        if (err) {throw err;}","        else {","            var tamuGeo = JSON.parse(body);","            console.log(tamuGeo['FeatureMatchingResultType']);","            meetingsData.push(tamuGeo);","        }","    });","    setTimeout(callback, 3000);","}, function() {","    fs.writeFileSync('first.json', JSON.stringify(meetingsData));","    console.log('*** *** *** *** ***');","    console.log('Number of meetings in this zone: ');","    console.log(meetingsData.length);","});"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":68,"column":3},"action":"insert","lines":["// npm install cheerio","","var fs = require('fs');","var cheerio = require('cheerio');","var request = require('request'); // npm install request","var async = require('async'); // npm install async","var fs = require('fs');","// load the thesis text file into a variable, `content`","// this is the file that we created in the starter code from last week","var content = fs.readFileSync('data/m09.txt');","","// load `content` into a cheerio object","var $ = cheerio.load(content);","/*","// print (to the console) names of thesis students","$('body > center > table > tbody > tr > td > table > tbody > tr:nth-child(2) > td > div > table > tbody>tr>td').each(function(i, elem) {","    if(i==0||i==3||i==6||i==9)","    console.log(i+\"번쨰 Address/Location : \"+$(elem).text());","});","","*/","// write the project titles to a text file","var thesisTitles = ''; // this variable will hold the lines of text","","var flag =1;","$('body > center > table > tbody > tr > td > table > tbody > tr:nth-child(2) > td > div > table > tbody>tr>td').each(function(i, elem) {","    if(i==0||i==3||i==6||i==9) {","        thesisTitles += flag +\"번째 주소 : \" + ($(elem).text()) + '\\n';","        flag++;   ","    }","        ","    ","});","var Split = thesisTitles.split(/\\r\\n|\\r|\\n/);","","var realaddress1 = Split[3].split(',')[0];","var realaddress2 = Split[21].split(',')[0];","var realaddress3 = Split[39].split(',')[0];","var realaddress4 = Split[57].split(',')[0];","","","","var apiKey = process.env.TAMU_KEY; ","console.log(\"apiKey : \" + apiKey)","var meetingsData = [];","var addresses = [realaddress1,realaddress2,realaddress3,realaddress4];","","// eachSeries in the async module iterates over an array and operates on each item in the array in series","async.eachSeries(addresses, function(value, callback) {","    var apiRequest = 'https://geoservices.tamu.edu/Services/Geocode/WebService/GeocoderWebServiceHttpNonParsed_V04_01.aspx?';","    apiRequest += 'streetAddress=' + value.split(' ').join('%20');","    apiRequest += '&city=New%20York&state=NY&apikey=' + apiKey;","    apiRequest += '&format=json&version=4.01';","    ","    request(apiRequest, function(err, resp, body) {","        if (err) {throw err;}","        else {","            var tamuGeo = JSON.parse(body);","            console.log(tamuGeo['FeatureMatchingResultType']);","            meetingsData.push(tamuGeo);","        }","    });","    setTimeout(callback, 3000);","}, function() {","    fs.writeFileSync('first.json', JSON.stringify(meetingsData));","    console.log('*** *** *** *** ***');","    console.log('Number of meetings in this zone: ');","    console.log(meetingsData.length);","});"],"id":3}],[{"start":{"row":68,"column":3},"end":{"row":69,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":68,"column":3},"end":{"row":69,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":9,"column":34},"end":{"row":9,"column":35},"action":"remove","lines":["a"],"id":6},{"start":{"row":9,"column":33},"end":{"row":9,"column":34},"action":"remove","lines":["t"]},{"start":{"row":9,"column":32},"end":{"row":9,"column":33},"action":"remove","lines":["a"]},{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"remove","lines":["d"]}],[{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"insert","lines":["ㅁ"],"id":7},{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"remove","lines":["ㅁ"]}],[{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"insert","lines":["a"],"id":8}],[{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"remove","lines":["a"],"id":9}],[{"start":{"row":9,"column":31},"end":{"row":9,"column":32},"action":"insert","lines":["A"],"id":10},{"start":{"row":9,"column":32},"end":{"row":9,"column":33},"action":"insert","lines":["d"]},{"start":{"row":9,"column":33},"end":{"row":9,"column":34},"action":"insert","lines":["d"]},{"start":{"row":9,"column":34},"end":{"row":9,"column":35},"action":"insert","lines":["i"]}],[{"start":{"row":9,"column":34},"end":{"row":9,"column":35},"action":"remove","lines":["i"],"id":11},{"start":{"row":9,"column":33},"end":{"row":9,"column":34},"action":"remove","lines":["d"]},{"start":{"row":9,"column":32},"end":{"row":9,"column":33},"action":"remove","lines":["d"]}],[{"start":{"row":9,"column":32},"end":{"row":9,"column":33},"action":"insert","lines":["s"],"id":12},{"start":{"row":9,"column":33},"end":{"row":9,"column":34},"action":"insert","lines":["s"]},{"start":{"row":9,"column":34},"end":{"row":9,"column":35},"action":"insert","lines":["i"]},{"start":{"row":9,"column":35},"end":{"row":9,"column":36},"action":"insert","lines":["g"]},{"start":{"row":9,"column":36},"end":{"row":9,"column":37},"action":"insert","lines":["n"]},{"start":{"row":9,"column":37},"end":{"row":9,"column":38},"action":"insert","lines":["m"]},{"start":{"row":9,"column":38},"end":{"row":9,"column":39},"action":"insert","lines":["e"]},{"start":{"row":9,"column":39},"end":{"row":9,"column":40},"action":"insert","lines":["n"]},{"start":{"row":9,"column":40},"end":{"row":9,"column":41},"action":"insert","lines":["t"]}],[{"start":{"row":9,"column":41},"end":{"row":9,"column":42},"action":"insert","lines":["2"],"id":13}],[{"start":{"row":64,"column":26},"end":{"row":64,"column":27},"action":"remove","lines":["t"],"id":14},{"start":{"row":64,"column":25},"end":{"row":64,"column":26},"action":"remove","lines":["s"]},{"start":{"row":64,"column":24},"end":{"row":64,"column":25},"action":"remove","lines":["r"]},{"start":{"row":64,"column":23},"end":{"row":64,"column":24},"action":"remove","lines":["i"]},{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"remove","lines":["f"]}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"insert","lines":["ㅁ"],"id":15},{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"remove","lines":["ㅁ"]}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"insert","lines":["A"],"id":16},{"start":{"row":64,"column":23},"end":{"row":64,"column":24},"action":"insert","lines":["s"]},{"start":{"row":64,"column":24},"end":{"row":64,"column":25},"action":"insert","lines":["s"]},{"start":{"row":64,"column":25},"end":{"row":64,"column":26},"action":"insert","lines":["o"]}],[{"start":{"row":64,"column":25},"end":{"row":64,"column":26},"action":"remove","lines":["o"],"id":17}],[{"start":{"row":64,"column":25},"end":{"row":64,"column":26},"action":"insert","lines":["i"],"id":18},{"start":{"row":64,"column":26},"end":{"row":64,"column":27},"action":"insert","lines":["g"]},{"start":{"row":64,"column":27},"end":{"row":64,"column":28},"action":"insert","lines":["n"]},{"start":{"row":64,"column":28},"end":{"row":64,"column":29},"action":"insert","lines":["m"]},{"start":{"row":64,"column":29},"end":{"row":64,"column":30},"action":"insert","lines":["e"]},{"start":{"row":64,"column":30},"end":{"row":64,"column":31},"action":"insert","lines":["n"]},{"start":{"row":64,"column":31},"end":{"row":64,"column":32},"action":"insert","lines":["t"]},{"start":{"row":64,"column":32},"end":{"row":64,"column":33},"action":"insert","lines":["3"]}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"remove","lines":["A"],"id":19}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"insert","lines":["A"],"id":20}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"remove","lines":["A"],"id":21}],[{"start":{"row":64,"column":22},"end":{"row":64,"column":23},"action":"insert","lines":["a"],"id":22}]]},"ace":{"folds":[],"scrolltop":883,"scrollleft":0,"selection":{"start":{"row":66,"column":53},"end":{"row":66,"column":53},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":54,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1538099695916,"hash":"b9728a7913a45aa32b23aee5f7a2fa118926bddd"}